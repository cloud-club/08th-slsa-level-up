---
# 보안 정책을 준수하는 안전한 배포 예시
apiVersion: v1
kind: Pod
metadata:
  name: secure-demo-app
  labels:
    app: demo
    sbom-verified: "true"  # 기존 SBOM 정책 준수
spec:
  # 호스트 네임스페이스 명시적으로 false 설정
  hostNetwork: false
  hostPID: false
  hostIPC: false
  
  containers:
  - name: app
    # 명시적 버전 태그 사용 (latest 금지)
    image: index.docker.io/kiku99/slsa:v1
    imagePullPolicy: IfNotPresent
    
    # Non-root 사용자로 실행
    securityContext:
      runAsNonRoot: true
      runAsUser: 1000
    
    # 리소스 제한 설정
    resources:
      requests:
        memory: "64Mi"
        cpu: "100m"
      limits:
        memory: "128Mi"
        cpu: "200m"
